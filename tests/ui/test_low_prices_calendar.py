import pytest

from air_bot.handlers.low_prices_calendar import show_calendar
from conftest import TestMessage, TestBot

CALENDAR_TESTS_DATA = [
    {"name": "Нет билетов", "month": 1, "tickets": {}},
    {
        "name": "Один билет",
        "month": 7,
        "tickets": {
            "2023-07-01": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25402,
                "airline": "FV",
                "flight_number": "6316",
                "departure_at": "2023-07-01T19:30:00+10:00",
                "return_at": "2023-07-17T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1020,
                "duration_to": 525,
                "duration_back": 495,
                "link": "/search/test_example",
            }
        },
    },
    {
        "name": "7 билетов, ссылки и цены разной длины",
        "month": 7,
        "tickets": {
            "2023-07-01": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 1,
                "airline": "FV",
                "flight_number": "6316",
                "departure_at": "2023-07-01T19:30:00+10:00",
                "return_at": "2023-07-17T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1020,
                "duration_to": 525,
                "duration_back": 495,
                "link": "/link__one",
            },
            "2023-07-02": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 10,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-02T08:40:00+10:00",
                "return_at": "2023-07-15T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/link___two",
            },
            "2023-07-03": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 100,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-03T08:40:00+10:00",
                "return_at": "2023-07-24T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/link____three",
            },
            "2023-07-04": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 1000,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-04T08:40:00+10:00",
                "return_at": "2023-07-08T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/link__four",
            },
            "2023-07-05": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 10000,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-05T08:40:00+10:00",
                "return_at": "2023-07-22T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/link__five",
            },
            "2023-07-06": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25412,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-06T08:40:00+10:00",
                "return_at": "2023-07-29T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/link_six",
            },
            "2023-07-07": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25823,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-07T08:40:00+10:00",
                "return_at": "2023-07-10T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/link_seven",
            },
        },
    },
    {
        "name": "Календарь разделён на несколько сообщений чтобы избежать превышения лимита сообщений",
        "month": 6,
        "tickets": {
            "2023-07-01": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25363,
                "airline": "FV",
                "flight_number": "6316",
                "departure_at": "2023-07-01T19:30:00+10:00",
                "return_at": "2023-07-18T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1020,
                "duration_to": 525,
                "duration_back": 495,
                "link": "/search/VVO0107MOW18071?t=SU16882038001688235300000525VVOSVO16896840001689713700000495SVOVVO_87692ae46c7cde79df0512dbf7a6c5c5_25363&search_date=27052023&expected_price_uuid=a63fce84-df00-4348-bf19-12a2305c41ed&expected_price_source=share&expected_price_currency=rub&expected_price=25363",
            },
            "2023-07-02": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25425,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-02T08:40:00+10:00",
                "return_at": "2023-07-22T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO0207MOW22071?t=SU16882512001688283000000530VVOSVO16900524001690083000000510SVOVVO_d00e6895ce5d1dac66333fb4e7f2661f_25425&search_date=27052023&expected_price_uuid=dbcc4d5e-d952-43bb-bce5-e169df6b4063&expected_price_source=share&expected_price_currency=rub&expected_price=25425",
            },
            "2023-07-03": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25197,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-03T08:40:00+10:00",
                "return_at": "2023-07-23T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO0307MOW23071?t=SU16883376001688369400000530VVOSVO16901160001690145700000495SVOVVO_20a17e49bf5f3c041fbc29f987134dc1_25553&search_date=28052023&expected_price_uuid=6f96b605-c61b-47fe-be79-b376e2fdc199&expected_price_source=share&expected_price_currency=rub&expected_price=25197",
            },
            "2023-07-04": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25543,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-04T08:40:00+10:00",
                "return_at": "2023-07-19T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO0407MOW19071?t=SU16884240001688455800000530VVOSVO16897704001689800100000495SVOVVO_b01d6a16d5e54a76fd710c4749c26b65_25543&search_date=23052023&expected_price_uuid=6593051f-02d9-4b2c-8a65-31d5a6caa8fe&expected_price_source=share&expected_price_currency=rub&expected_price=25543",
            },
            "2023-07-05": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25535,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-05T08:40:00+10:00",
                "return_at": "2023-07-22T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO0507MOW22071?t=SU16885104001688542200000530VVOSVO16900524001690083000000510SVOVVO_414d656937d7a7c75fdb788c9145864b_25535&search_date=27052023&expected_price_uuid=792220e7-828a-4498-94e1-2b8f5fb6fb9a&expected_price_source=share&expected_price_currency=rub&expected_price=25535",
            },
            "2023-07-06": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25466,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-06T08:40:00+10:00",
                "return_at": "2023-07-08T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/search/VVO0607MOW08071?t=SU16885968001688628600000530VVOSVO16887693001688799600000505SVOVVO_764be7d2ac36dfade9ed80f0316898c2_25425&search_date=27052023&expected_price_uuid=6b346e4a-9a69-433e-8795-a8cd05ca26b2&expected_price_source=share&expected_price_currency=rub&expected_price=25466",
            },
            "2023-07-07": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25341,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-07T08:40:00+10:00",
                "return_at": "2023-07-22T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO0707MOW22071?t=SU16886832001688715000000530VVOSVO16900524001690083000000510SVOVVO_ec033e3beb62b50ba1e92fe03fb2d1b9_25382&search_date=24052023&expected_price_uuid=16426b81-48eb-4b08-958a-a4f2604d0f04&expected_price_source=share&expected_price_currency=rub&expected_price=25341",
            },
            "2023-07-08": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25363,
                "airline": "FV",
                "flight_number": "6316",
                "departure_at": "2023-07-08T19:30:00+10:00",
                "return_at": "2023-07-18T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1020,
                "duration_to": 525,
                "duration_back": 495,
                "link": "/search/VVO0807MOW18071?t=SU16888086001688840100000525VVOSVO16896840001689713700000495SVOVVO_da91f5082983abcac545ad526b7f5a2a_25363&search_date=27052023&expected_price_uuid=d49e170f-b16f-4721-aa1d-471f6ada68e6&expected_price_source=share&expected_price_currency=rub&expected_price=25363",
            },
            "2023-07-09": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25701,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-09T08:40:00+10:00",
                "return_at": "2023-07-26T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO0907MOW26071?t=SU16888560001688887800000530VVOSVO16903752001690404900000495SVOVVO_6b33573ad7aeedc70049717385e38586_25752&search_date=22052023&expected_price_uuid=bee867c9-7931-4983-9338-49fbc6a96a75&expected_price_source=share&expected_price_currency=rub&expected_price=25701",
            },
            "2023-07-10": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25552,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-10T08:40:00+10:00",
                "return_at": "2023-07-22T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/search/VVO1007MOW22071?t=SU16889424001688974200000530VVOSVO16899789001690009200000505SVOVVO_1c656ae0a88d310094e0d67e0aae6150_25538&search_date=25052023&expected_price_uuid=7844923e-2cfc-45d5-ac88-43630702c0c7&expected_price_source=share&expected_price_currency=rub&expected_price=25552",
            },
            "2023-07-11": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25470,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-11T08:40:00+10:00",
                "return_at": "2023-07-22T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO1107MOW22071?t=SU16890288001689060600000530VVOSVO16900524001690083000000510SVOVVO_6a5222f9cef82749ba7b6a6392af8ac1_25469&search_date=26052023&expected_price_uuid=e731ad1d-4ed1-46a5-906f-6aaf239c7a97&expected_price_source=share&expected_price_currency=rub&expected_price=25470",
            },
            "2023-07-12": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25197,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-12T08:40:00+10:00",
                "return_at": "2023-07-22T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO1207MOW22071?t=SU16891152001689147000000530VVOSVO16900524001690083000000510SVOVVO_26f65329f44fa753cfc273323993e3d5_25553&search_date=28052023&expected_price_uuid=3a4fd47f-a6d4-4b5c-9dc7-2e9ec8aeb3cf&expected_price_source=share&expected_price_currency=rub&expected_price=25197",
            },
            "2023-07-13": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25470,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-13T08:40:00+10:00",
                "return_at": "2023-07-22T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/search/VVO1307MOW22071?t=SU16892016001689233400000530VVOSVO16899789001690009200000505SVOVVO_464cdf2417bdb1e28257863dca5b2ad0_25469&search_date=26052023&expected_price_uuid=7d322c9e-a5d6-4196-8141-8cff2c949dc0&expected_price_source=share&expected_price_currency=rub&expected_price=25470",
            },
            "2023-07-14": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25470,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-14T08:40:00+10:00",
                "return_at": "2023-07-22T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/search/VVO1407MOW22071?t=SU16892880001689319800000530VVOSVO16899789001690009200000505SVOVVO_0f978b3789e8c28b0e33ce5297f44e23_25469&search_date=26052023&expected_price_uuid=82be4ca4-22e7-4582-9be1-9d80f533abb5&expected_price_source=share&expected_price_currency=rub&expected_price=25470",
            },
            "2023-07-15": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25341,
                "airline": "FV",
                "flight_number": "6316",
                "departure_at": "2023-07-15T19:30:00+10:00",
                "return_at": "2023-07-30T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1020,
                "duration_to": 525,
                "duration_back": 495,
                "link": "/search/VVO1507MOW30071?t=SU16894134001689444900000525VVOSVO16907208001690750500000495SVOVVO_ed950f1d2496ba8d96c6edf118f5a2bc_25382&search_date=24052023&expected_price_uuid=cee297bb-88ec-42a2-b1c1-ef4ddafe2776&expected_price_source=share&expected_price_currency=rub&expected_price=25341",
            },
            "2023-07-16": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 27542,
                "airline": "SU",
                "flight_number": "1709",
                "departure_at": "2023-07-16T19:25:00+10:00",
                "return_at": "2023-07-25T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1020,
                "duration_to": 525,
                "duration_back": 495,
                "link": "/search/VVO1607MOW25071?t=SU16894995001689531000000525VVOSVO16902888001690318500000495SVOVVO_ffb12b55bd6ca133508f956140bf5bb9_27586&search_date=24052023&expected_price_uuid=6ad532ea-1b6d-4f03-991f-e4fa18e3380c&expected_price_source=share&expected_price_currency=rub&expected_price=27542",
            },
            "2023-07-17": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25466,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-17T08:40:00+10:00",
                "return_at": "2023-07-29T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/search/VVO1707MOW29071?t=SU16895472001689579000000530VVOSVO16905837001690614000000505SVOVVO_ffef4bae710ebf96c9de48a2a4ba5016_25425&search_date=27052023&expected_price_uuid=dd3db2a9-df0a-46bf-827f-8a7f9931bd03&expected_price_source=share&expected_price_currency=rub&expected_price=25466",
            },
            "2023-07-18": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25114,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-18T08:40:00+10:00",
                "return_at": "2023-07-22T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO1807MOW22071?t=SU16896336001689665400000530VVOSVO16900524001690083000000510SVOVVO_11c70ff91827dc74bfe58f6ec0142809_25469&search_date=28052023&expected_price_uuid=87144dfb-420d-47a6-a317-87cccf400ccd&expected_price_source=share&expected_price_currency=rub&expected_price=25114",
            },
            "2023-07-19": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25543,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-19T08:40:00+10:00",
                "return_at": "2023-07-29T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/search/VVO1907MOW29071?t=SU16897200001689751800000530VVOSVO16905837001690614000000505SVOVVO_bfd93c75401e715cce9a02cf0f3c6320_25543&search_date=26052023&expected_price_uuid=6b04e865-5617-4cea-9569-d6c00aee1e9f&expected_price_source=share&expected_price_currency=rub&expected_price=25543",
            },
            "2023-07-20": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25463,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-20T08:40:00+10:00",
                "return_at": "2023-07-24T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO2007MOW24071?t=SU16898064001689838200000530VVOSVO16902024001690232100000495SVOVVO_ed7d819f092865dbdf33d4726fde1c31_25823&search_date=28052023&expected_price_uuid=616a0be8-b271-4269-ada4-a19fb5641ed8&expected_price_source=share&expected_price_currency=rub&expected_price=25463",
            },
            "2023-07-21": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25470,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-21T08:40:00+10:00",
                "return_at": "2023-07-29T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO2107MOW29071?t=SU16898928001689924600000530VVOSVO16906572001690687800000510SVOVVO_640b3173b283296814015e40de1a8214_25469&search_date=26052023&expected_price_uuid=ae6ece20-d49c-4661-a037-716668f27373&expected_price_source=share&expected_price_currency=rub&expected_price=25470",
            },
            "2023-07-22": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25108,
                "airline": "FV",
                "flight_number": "6316",
                "departure_at": "2023-07-22T19:30:00+10:00",
                "return_at": "2023-07-29T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 525,
                "duration_back": 510,
                "link": "/search/VVO2207MOW29071?t=SU16900182001690049700000525VVOSVO16906572001690687800000510SVOVVO_ba44a3c1e2ba7f3e557d21cd6d5cfcbc_25463&search_date=28052023&expected_price_uuid=16c5d4ff-cab5-4249-9d6f-e3a7848438e6&expected_price_source=share&expected_price_currency=rub&expected_price=25108",
            },
            "2023-07-23": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25474,
                "airline": "FV",
                "flight_number": "6318",
                "departure_at": "2023-07-23T15:15:00+10:00",
                "return_at": "2023-07-24T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 545,
                "duration_back": 495,
                "link": "/search/VVO2307MOW24071?t=SU16900893001690122000000545VVOSVO16902024001690232100000495SVOVVO_32aa1f8372d12fba27af67e38f8abf0d_25525&search_date=22052023&expected_price_uuid=cc36de1c-859f-4b94-bec2-6ea75f17152c&expected_price_source=share&expected_price_currency=rub&expected_price=25474",
            },
            "2023-07-24": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25197,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-24T08:40:00+10:00",
                "return_at": "2023-07-29T22:00:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1040,
                "duration_to": 530,
                "duration_back": 510,
                "link": "/search/VVO2407MOW29071?t=SU16901520001690183800000530VVOSVO16906572001690687800000510SVOVVO_a5ef79c686aebefcd97af5fa6c2e4faf_25553&search_date=28052023&expected_price_uuid=e01ae767-72ec-4f55-b9bd-daf5cacc4428&expected_price_source=share&expected_price_currency=rub&expected_price=25197",
            },
            "2023-07-25": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25579,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-25T08:40:00+10:00",
                "return_at": "2023-07-29T01:35:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1035,
                "duration_to": 530,
                "duration_back": 505,
                "link": "/search/VVO2507MOW29071?t=SU16902384001690270200000530VVOSVO16905837001690614000000505SVOVVO_da2dda19fc7fdf86fdc8d709cf2ff1dd_25538&search_date=23052023&expected_price_uuid=af55ea83-fa69-4835-b6c9-43053d35f5e1&expected_price_source=share&expected_price_currency=rub&expected_price=25579",
            },
            "2023-07-26": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25823,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-26T08:40:00+10:00",
                "return_at": "2023-07-28T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO2607MOW28071?t=SU16903248001690356600000530VVOSVO16905480001690577700000495SVOVVO_bd445dbca8e5a63d32b3692e0e155247_25823&search_date=23052023&expected_price_uuid=08c0b86a-e9f6-4f67-9006-c857e2a12bc5&expected_price_source=share&expected_price_currency=rub&expected_price=25823",
            },
            "2023-07-27": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25782,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-27T08:40:00+10:00",
                "return_at": "2023-07-30T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO2707MOW30071?t=SU16904112001690443000000530VVOSVO16907208001690750500000495SVOVVO_448cf21a71539a3b18ab42caed5d4a1a_25823&search_date=24052023&expected_price_uuid=909576f2-cbc4-4d1e-ba01-d360e0803c24&expected_price_source=share&expected_price_currency=rub&expected_price=25782",
            },
            "2023-07-28": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25792,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-28T08:40:00+10:00",
                "return_at": "2023-07-31T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO2807MOW31071?t=SU16904976001690529400000530VVOSVO16908072001690836900000495SVOVVO_915d01194ab32d83fc9b552b532933a4_25844&search_date=22052023&expected_price_uuid=ad817d4f-15ef-45e3-ba09-48a510bf36e7&expected_price_source=share&expected_price_currency=rub&expected_price=25792",
            },
            "2023-07-29": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25842,
                "airline": "FV",
                "flight_number": "6316",
                "departure_at": "2023-07-29T19:30:00+10:00",
                "return_at": "2023-07-30T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1020,
                "duration_to": 525,
                "duration_back": 495,
                "link": "/search/VVO2907MOW30071?t=SU16906230001690654500000525VVOSVO16907208001690750500000495SVOVVO_6f31b9645476efd5a054a887f7762765_25842&search_date=26052023&expected_price_uuid=e59f8ee8-7b44-4ee0-8b43-77bc550dad18&expected_price_source=share&expected_price_currency=rub&expected_price=25842",
            },
            "2023-07-30": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25864,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-30T08:40:00+10:00",
                "return_at": "2023-07-30T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO3007MOW30071?t=SU16906704001690702200000530VVOSVO16907208001690750500000495SVOVVO_54788674f8bf0395c063563cefcf87ee_25823&search_date=23052023&expected_price_uuid=785623ca-211a-4a33-8ebf-52ff2072b363&expected_price_source=share&expected_price_currency=rub&expected_price=25864",
            },
            "2023-07-31": {
                "origin": "VVO",
                "destination": "MOW",
                "origin_airport": "VVO",
                "destination_airport": "SVO",
                "price": 25796,
                "airline": "FV",
                "flight_number": "6252",
                "departure_at": "2023-07-31T08:40:00+10:00",
                "return_at": "2023-07-31T15:40:00+03:00",
                "transfers": 0,
                "return_transfers": 0,
                "duration": 1025,
                "duration_to": 530,
                "duration_back": 495,
                "link": "/search/VVO3107MOW31071?t=SU16907568001690788600000530VVOSVO16908072001690836900000495SVOVVO_f3166255a3d4b4d41f2f13ced2e9a527_25848&search_date=22052023&expected_price_uuid=93b516ee-77f3-424b-b6ac-1016258d4638&expected_price_source=share&expected_price_currency=rub&expected_price=25796",
            },
        },
    },
]

# TODO: remove
CALENDAR_TESTS_DATA = [CALENDAR_TESTS_DATA[-1]]


@pytest.mark.parametrize("test_data", CALENDAR_TESTS_DATA)
async def test_correct_formatting(
    bot: TestBot, message_for_answer: TestMessage, test_data
):
    await bot.send_message(text=test_data["name"])
    await show_calendar(
        message_for_answer, test_data["month"], test_data["tickets"], [], False, False
    )
